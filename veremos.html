<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css\veremos.css">
    <title>Gesti√≥n de Clientes</title>
</head>
<body>
    <div class="container">
        <h1>RECEPCION</h1>
        <button class="btn-agregar" onclick="abrirModal()">‚ûï Agregar Cliente</button>
        <button class="btn-agregar" onclick="ModalRecep()">‚ûï Recepcion de Equipo</button>
        
                                                    <!-- Lista de clientes -->
        <div class="clientes-lista">
            <h3>Recepciones realizadas</h3>
            <div class="clientes-grid" id="clientesGrid">
                <div class="empty-message">No hay clientes registrados</div>
            </div>
        </div>
    </div>

                                            <!-- Modal flotante de a√±adir cliente-->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h2>Nueva Recepci√≥n</h2>
            <div class="progress" id="progress">Paso 1 de 4</div>
            
            <form id="clienteForm" onsubmit="return false;">
                <div class="form-group">
                    <label for="nombre">Nombre Completo: </label>
                    <input type="text" id="nombre" placeholder="Ej: Fernando Andrade" autocomplete="off">
                    <div class="error-message" id="errorNombre">El nombre es requerido</div>
                </div>

                <div class="form-group">
                    <label for="direccion">Direcci√≥n: </label>
                    <input type="text" id="direccion" placeholder="Ej: Batallon de San Patricio" autocomplete="off">
                    <div class="error-message" id="errorDireccion">Direccion es requerida</div>
                </div>

                <div class="form-group">
                    <label for="telefono">Telefono: </label>
                    <input type="text" id="telefono" placeholder="Ej: 3317518530" autocomplete="off">
                    <div class="error-message" id="errorTelefono">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="correo">correo: </label>
                    <input type="text" id="correo" placeholder="Ej: ejemplo@ejemplo.com" autocomplete="off">
                    <div class="error-message" id="errorCorreo">correo requerido</div>
                </div>


                <div class="modal-buttons">
                    <button type="button" class="btn-cancelar" onclick="cerrarModal()">Cancelar</button>
                    <button type="button" class="btn-siguiente" id="btnSiguiente" onclick="siguientePaso()">Siguiente</button>
                </div>
            </form>
        </div>
    </div>
                                                <!--Modal flotante de recepcion-->
    <div class="modal-overlay" id="modalRecepOverlay">
        <div class="modal">
            <h2>Nueva Recepci√≥n</h2>
            <div class="progress" id="progress">Paso 1 de 3</div>
            
            <form id="clienteForm" onsubmit="return false;">
                <div class="form-group">
                    <label for="nombre">Equipo: </label>
                    <input type="text" id="nombre" placeholder="Ej: Monitor " autocomplete="off">
                    <div class="error-message" id="errorNombre">El nombre es requerido</div>
                </div>

                <div class="form-group">
                    <label for="marca">Marca: </label>
                    <input type="text" id="marca" placeholder="Ej: Mindray" autocomplete="off">
                    <div class="error-message" id="errorMarca">El nombre es requerido</div>
                </div>

                <div class="form-group">
                    <label for="modelo">Modelo: </label>
                    <input type="text" id="modelo" placeholder="Ej: Umec" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="sn">Numero de serie: </label>
                    <input type="text" id="sn" placeholder="Ej: 1234" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="acces">Accesorios: </label>
                    <input type="text" id="acces" placeholder="Ej: sensores, cable ac" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="problem">Problematica mencionada: </label>
                    <input type="text" id="problem" placeholder="Ej: el perro lo mio" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="serviceType">Tipo de servicio: </label>
                    <input type="text" id="serviceType" placeholder="Ej: MP" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="form-group">
                    <label for="Client">cliente: </label>
                    <input type="text" id="Client" placeholder="Ej: marianita" autocomplete="off">
                    <div class="error-message" id="errorModelo">El tel√©fono es requerido</div>
                </div>

                <div class="modal-buttons">
                    <button type="button" class="btn-cancelar" onclick="cerrarModal()">Cancelar</button>
                    <button type="button" class="btn-siguiente" id="btnSiguiente" onclick="siguientePaso()">Siguiente</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let pasoActual = 1;
        const campos = ['nombre', 'direccion', 'telefono', 'correo'];
        let clienteActual = {
            nombre: '',
            direccion: '',
            telefono: '',
            correo:''
        };
        
                                                        // Array para almacenar los clientes
        let clientes = [];
                                                                // ABRIR MODAL
        function abrirModal() {
            resetearFormulario();
            document.getElementById('modalOverlay').style.display = 'flex';
            document.getElementById('nombre').focus();
        }
        
        function ModalRecep() {
            resetearFormulario();
            document.getElementById('modalRecepOverlay').style.display = 'flex';
            document.getElementById('nombre').focus();
        }
                                                                // CERRAR MODAL
        function cerrarModal() {
            document.getElementById('modalOverlay').style.display = 'none';
            document.getElementById('modalRecepOverlay').style.display = 'none';
            resetearFormulario();
        }

        function resetearFormulario() {
            pasoActual = 1;
            clienteActual = { nombre: '', direccion: '', telefono: '', correo:'' };
            campos.forEach(campo => {
                document.getElementById(campo).value = '';
                document.getElementById(campo).style.display = 'block';
                document.getElementById(campo).classList.remove('error');
            });
            
                                                        // Mostrar solo el primer campo
            document.getElementById('nombre').style.display = 'block';
            document.getElementById('direccion').style.display = 'none';
            document.getElementById('telefono').style.display = 'none';
            document.getElementById('correo').style.display = 'none';
            
            document.getElementById('progress').textContent = 'Paso 1 de 4';
            document.getElementById('btnSiguiente').disabled = false;
            document.getElementById('btnSiguiente').textContent = 'Siguiente';
            
                                                        // Ocultar mensajes de error
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.style.display = 'none';
            });
        }

        function validarCampoActual() {
            const campoId = campos[pasoActual - 1];
            const valor = document.getElementById(campoId).value.trim();
            const errorElement = document.getElementById(`error${campoId.charAt(0).toUpperCase() + campoId.slice(1)}`);
            
            if (!valor) {
                document.getElementById(campoId).classList.add('error');
                errorElement.style.display = 'block';
                return false;
            }
            
                                                    // Validaci√≥n espec√≠fica para email
            if (campoId === 'correo') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(valor)) {
                    document.getElementById(campoId).classList.add('error');
                    errorElement.textContent = 'Ingrese un correo v√°lido';
                    errorElement.style.display = 'block';
                    return false;
                }
            }
            
                                            // Validaci√≥n espec√≠fica para tel√©fono (m√≠nimo 10 d√≠gitos)
            if (campoId === 'telefono') {
                const telefonoLimpio = valor.replace(/\D/g, '');
                if (telefonoLimpio.length < 10) {
                    document.getElementById(campoId).classList.add('error');
                    errorElement.textContent = 'Ingrese un tel√©fono v√°lido (m√≠nimo 10 d√≠gitos)';
                    errorElement.style.display = 'block';
                    return false;
                }
            }
            
            document.getElementById(campoId).classList.remove('error');
            errorElement.style.display = 'none';
            
                                                    // Guardar el valor en clienteActual
            clienteActual[campoId] = valor;
            
            return true;
        }

        function siguientePaso() {
            if (!validarCampoActual()) {
                return;
            }

            if (pasoActual < 4) {
                                                        // Ocultar campo actual
                document.getElementById(campos[pasoActual - 1]).style.display = 'none';
                
                                                        // Avanzar al siguiente paso
                pasoActual++;
                
                                                        // Mostrar siguiente campo
                document.getElementById(campos[pasoActual - 1]).style.display = 'block';
                document.getElementById(campos[pasoActual - 1]).focus();
                
                document.getElementById('progress').textContent = `Paso ${pasoActual} de 4`;
                
                                                        // Si es el √∫ltimo paso, cambiar texto del bot√≥n
                if (pasoActual === 4) {
                    document.getElementById('btnSiguiente').textContent = 'Guardar Cliente';
                }
            } else {
                                                        // √öltimo paso - guardar cliente
                guardarCliente();
            }
        }

        function guardarCliente() {
                                                    // Crear objeto cliente con los datos
            const nuevoCliente = {
                id: Date.now(),
                nombre: clienteActual.nombre,
                direccion: clienteActual.direccion,
                telefono: clienteActual.telefono,
                correo: clienteActual.correo
            };
            
                                                            // Agregar al array de clientes
            clientes.push(nuevoCliente);
            
                                                            // Actualizar la lista visible
            actualizarListaClientes();
            
                                                            // Mostrar mensaje de √©xito y cerrar modal
            cerrarModal();
            
                                                            // Opcional: Mostrar notificaci√≥n
            alert(`¬°Cliente ${nuevoCliente.nombre} agregado con √©xito!`);
        }

        function actualizarListaClientes() {
            const grid = document.getElementById('clientesGrid');
            
            if (clientes.length === 0) {
                grid.innerHTML = '<div class="empty-message">No hay clientes registrados</div>';
                return;
            }
            
            let html = '';
            clientes.forEach(cliente => {
                html += `
                    <div class="cliente-item">
                        <p class="nombre">üë§ ${cliente.nombre}</p>
                        <p>üìß ${cliente.direccion}</p>
                        <p>üìû ${cliente.telefono}</p>
                        <p>üìû ${cliente.correo}</p>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }

                                                        // Cerrar modal si se hace clic fuera del contenido
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                cerrarModal();
            }
        });
        document.getElementById('modalRecepOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                cerrarModal();
            }
        });

                                                            // Permitir enviar con Enter
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.getElementById('modalOverlay').style.display === 'flex') {
                e.preventDefault();
                siguientePaso();
            }
            
            if (e.key === 'Escape' && document.getElementById('modalOverlay').style.display === 'flex') {
                cerrarModal();
            }
        });
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.getElementById('modalRecepOverlay').style.display === 'flex') {
                e.preventDefault();
                siguientePaso();
            }
            
            if (e.key === 'Escape' && document.getElementById('modalRecepOverlay').style.display === 'flex') {
                cerrarModal();
            }
        });

                                                            // Inicializar: ocultar todos los campos excepto el primero
        window.onload = function() {
            document.getElementById('direccion').style.display = 'none';
            document.getElementById('telefono').style.display = 'none';
            
                                                                // Agregar algunos clientes de ejemplo
            clientes = [
                {
                    id: 1,
                    nombre: 'Mar√≠a Garc√≠a',
                    direccion: 'maria@email.com',
                    telefono: '+52 555 123 4567',
                    correo: 'hector'
                },
                {
                    id: 2,
                    nombre: 'Carlos L√≥pez',
                    direccion: 'carlos@email.com',
                    telefono: '+52 555 987 6543',
                    correo: 'hector'
                }
            ];
            actualizarListaClientes();
        };
    </script>
</body>
</html>